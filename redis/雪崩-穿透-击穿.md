## 雪崩
* 一把情况是缓存大面积失效情况，导致请求全量打向数据库，导致服务崩溃，引起连锁反应，其他服务也不可用。比如批量存数据时，设置过期时间12小时，12小时之后就全部失效，引起雪崩效应，如果是用户服务，那么用户服务崩溃，引起其他服务不可用，大量数据打入同时，服务也起不来。
    * 解决办法：使用随机过期时间。或者设置热点数据永不过期，有更新操作去更新缓存就行，首页热门数据等

## 穿透
* 指数据库和缓存中都没有数据，而请求不断进来情况。比如数据库id从0自增上去的，如果id=-1或者很大的一个数。这肯很可能就是攻击者，这会导致数据库压力过大，拖垮数据库。
    * 解决办法： 
        * 1.接口层增加校验。用户鉴权or参数校验。
        * 2.使用redis 布隆过滤器（bloom-filter），使用高效的数据结构和算法判断key是否在数据库中，不存在直接return,存在从数据库中查找。

## 缓存击穿
* 与雪崩类似，大量请求打到数据库；而原因却不是大量数据缓存失效，而是一个key非热点数据，在不停抗这大并发，当该key失效是，持续并发穿破缓存，直接请求数据库，就好像一个完好桶中穿了一个洞。
    * 解决办法： 热点数据永不过期，更新刷新缓存or 加上互斥锁（？没理解）

**预防心法** 
* 对于一切调用者都“不放心”。给出去参数不知道调用者会用什么奇怪参数来请求，或者攻击者。所以做好参数校验和边界检查。

* 面对请求过大或者攻击者。用限流组件处理，也就是常说的降级。